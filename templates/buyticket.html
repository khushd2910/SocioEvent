<!DOCTYPE html>
<html lang="en">

<head>
  <title>Buy Ticket</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #F5F1EB;
    }

    .ticket-card {
      border-radius: 14px;
      border: none;
    }

    .section-title {
      font-size: 0.85rem;
      letter-spacing: 0.08em;
      color: #64748B;
    }

    .event-title {
      color: #0F172A;
      font-weight: 600;
    }

    .price-text {
      font-size: 1.4rem;
      font-weight: 600;
      color: #0F172A;
    }

    .payment-option {
      border: 1px solid #E5E7EB;
      border-radius: 10px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .payment-option:hover {
      border-color: #0F172A;
      background-color: #FAFAFA;
    }

    /* ===== PREMIUM BUTTON (USED FOR BOTH) ===== */
    .action-btn {
      background-color: #0F172A;
      /* Navy */
      border: 2px solid #000000;
      /* Black border */
      border-radius: 12px;
      padding: 12px;
      font-weight: 500;
      color: #ffffff !important;
      transition: all 0.25s ease;
    }

    .action-btn:hover {
      background-color: #ffffff !important;
      color: #000000 !important;
      border-color: #000000;
    }

    .action-btn:disabled {
      background-color: #334155;
      border-color: #334155;
      color: #ffffff !important;
    }

    .trust-box {
      background-color: #F8FAFC;
      border-radius: 10px;
      padding: 12px;
      font-size: 0.85rem;
      color: #475569;
    }

    .ticket-note {
      font-size: 0.85rem;
      color: #475569;
      background-color: #F8FAFC;
      border-radius: 10px;
      padding: 12px;
    }
  </style>
</head>

<body>

  {% include "navbar.html" %}

  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-md-6">

        <div class="card ticket-card shadow-sm bg-white">

          <!-- Event Header -->
          <div class="card-body border-bottom">
            <p class="section-title mb-1">EVENT DETAILS</p>
            <h5 class="event-title mb-2">{{ event.name }}</h5>

            <div class="d-flex justify-content-between text-muted small">
              <span>
                <i class="bi bi-calendar-event me-1"></i>{{ event.date }}
              </span>
              <span class="price-text">₹{{ event.price }}</span>
            </div>
          </div>

          <!-- Payment Section -->
          <div class="card-body">

            <p class="section-title mb-3">PAYMENT METHOD</p>

            <form id="paymentForm" action="{{ url_for('confirm_ticket', event_id=event.id) }}" method="POST">

              <label class="payment-option d-flex align-items-center mb-3">
                <input class="form-check-input me-3" type="radio" name="payment" value="UPI" required>
                <i class="bi bi-phone fs-5 me-2"></i>
                <span>UPI (Google Pay / PhonePe)</span>
              </label>

              <label class="payment-option d-flex align-items-center mb-3">
                <input class="form-check-input me-3" type="radio" name="payment" value="Card">
                <i class="bi bi-credit-card fs-5 me-2"></i>
                <span>Credit / Debit Card</span>
              </label>

              <label class="payment-option d-flex align-items-center mb-4">
                <input class="form-check-input me-3" type="radio" name="payment" value="Net Banking">
                <i class="bi bi-bank fs-5 me-2"></i>
                <span>Net Banking</span>
              </label>

              <!-- Ticket Info -->
              <div class="ticket-note mb-4">
                <i class="bi bi-ticket-perforated me-2"></i>
                Your ticket will be sent to your registered email immediately after successful payment.
              </div>

              <!-- Confirm Button -->
              <button id="payButton" type="submit" class="btn action-btn w-100 mb-3">
                <span id="btnText">
                  <i class="bi bi-lock-fill me-2"></i>Confirm & Pay
                </span>
                <span id="btnLoader" class="d-none">
                  <span class="spinner-border spinner-border-sm me-2"></span>
                  Processing...
                </span>
              </button>

            </form>

            <!-- Trust Indicator -->
            <div class="trust-box text-center mb-3">
              <i class="bi bi-shield-lock-fill me-2"></i>
              100% Secure Payment · Your data is encrypted and protected
            </div>

            <!-- Go Back Button -->
            <a href="{{ back or url_for('find_events') }}" class="btn action-btn w-100 text-center">
              <i class="bi bi-arrow-left me-2"></i>Go Back
            </a>

          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Loading State Script -->
  <script>
    const form = document.getElementById("paymentForm");
    const button = document.getElementById("payButton");
    const btnText = document.getElementById("btnText");
    const btnLoader = document.getElementById("btnLoader");

    form.addEventListener("submit", () => {
      button.disabled = true;
      btnText.classList.add("d-none");
      btnLoader.classList.remove("d-none");
    });
  </script>

</body>

</html>